@{
    ViewData["Title"] = "Template";
    Layout = "~/Views/Shared/EditorLayout.cshtml";
}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-2">
            <div class="card" id="shapes_panel" style="max-height:90%;overflow:scroll;display:none">
                <div class="card-header">
                    <center><h5>Shapes</h5></center>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <img id="rect_shape" style="width:100%" onclick="add_rectangle_shape_object('rect')" class="template-img" height="70" src="~/dist/img/shapes/rectangle.png" />
                        </div>
                        <div class="col-sm-6">
                            <img id="sqaure_shape" style="width:100%" onclick="add_square_shape_object('rect')" class="template-img" height="70" src="~/dist/img/shapes/sqaure.png" />
                        </div>
                    </div><hr />
                    <div class="row">
                        <div class="col-sm-6">
                            <img id="circle_shape" style="width:100%" onclick="add_circle_shape_object('circle')" class="template-img" height="70" src="~/dist/img/shapes/circle.png" />
                        </div>
                        @* <div class="col-sm-6">
                        <img id="oval_shape" style="width:100%" onclick="add_oval_shape_object('oval')" class="template-img" height="70" src="~/dist/img/shapes/oval.png" />
                        </div>*@
                    </div>
                </div>
            </div>
            <div class="card" id="upload_panel" style="max-height:90%;overflow:scroll;display:none">
                <div class="card-header">
                    <center><h5>Upload</h5></center>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <input id="file_upload" type="file" />
                        </div>
                    </div><hr />
                </div>
            </div>
            <div id="templates_panel" class="card" style="max-height:90%;overflow:scroll;display:none;">
                <div class="card-header">
                    <center><h5>Templates</h5></center>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <img id="image1" onclick="add_image_object('/dist/img/anita-austvika-chRIgTHFBy0-unsplash.jpg')" class="template-img" height="200" src="~/dist/img/anita-austvika-chRIgTHFBy0-unsplash.jpg" />
                        </div>
                    </div><hr />
                    <div class="row">
                        <div class="col-sm-12">
                            <img id="image2" onclick="add_image_object('/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg')" class="template-img" height="200" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" />
                        </div>
                    </div><hr />
                    <div class="row">
                        <div class="col-sm-12">
                            <img id="image3" onclick="add_image_object('/dist/img/tom-morbey-H7mzAJ8jTMg-unsplash.jpg')" class="template-img" height="200" src="~/dist/img/tom-morbey-H7mzAJ8jTMg-unsplash.jpg" />
                        </div>
                    </div>
                </div>
                <div class="card-footer"></div>
            </div>
            <div id="text_panel" class="card" style="display:none;">
                <div class="card-header">
                    <center><h5>Labels</h5></center>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <button onclick="add_label_object()" class="btn btn-info btn-block">Add Label</button>
                        </div>
                    </div><hr />
                </div>
                <div class="card-footer"></div>
            </div>
        </div>
        <div class="col-sm-10">
            <hr />
            <div class="row">
                <div class="col-sm-1">
                    <button class="btn btn-info" onclick="download()">Save</button>
                </div>
                <div class="col-sm-1" id="background_color" style="display:none">
                    <small>B.Color</small>
                    <input onchange="change_object_color('_color')" type="color" id="_color" />
                </div>
                @*<div class=col-sm-1>
                <small id="bold_text" onclick="bold_text()"><b>Edit label</b></small>
                </div>*@
                <div class="col-sm-2" id="text_els" style="display:none">
                    <button id="bold_text" class="btn btn-default" style="font-weight: bold;" onclick="bold_text()">Bold</button>
                    <button id="italic_text" class="btn btn-default" style="font-style:italic;" onclick="italic_text()">Italic</button>
                    <button class="btn btn-default" onclick="toupper_text()">A</button>
                    <button class="btn btn-default" onclick="tolower_text()">a</button>
                </div>
                <div class="col-sm-1" id="text_el_fs" style="display:none;width:30%">

                    <input oninput="change_font_size()" id="size_text" type="number" min="1" max="100" placeholder="font size" />
                </div>
                <div class="col-sm-1" id="text_el_fc" style="display:none">
                    <small>F.Color</small>
                    <input onchange="change_font_color()" type="color" id="text_color" />
                </div>
                <div class="col-sm-1" id="text_el_ff" style="display:none">
                    <select class="form-select" id="fontfamily_text" onchange="change_fontfamily()">
                        <option value="">Select</option>
                        <option disabled style="font-weight: bold; background-color: #EEEEEE">Serif Fonts</option>
                        <option value="Georgia" style="font-family: Georgia,serif">Georgia</option>
                        <option value="Palatino Linotype" style="font-family: Palatino Linotype,Book Antiqua,Palatino,serif">Palatino Linotype</option>
                        <option value="Times New Roman" style="font-family: Times New Roman,Times,serif">Times New Roman</option>
                        <option disabled style="font-weight: bold; background-color: #EEEEEE">Sans-Serif Fonts</option>
                        <option value="Arial" style="font-family: Arial,Helvetica,sans-serif">Arial</option>
                        <option value="Arial Black" style="font-family: Arial Black,Gadget,sans-serif">Arial Black</option>
                        <option value="Comic Sans MS" style="font-family: Comic Sans MS,cursive,sans-serif">Comic Sans MS</option>
                        <option value="Impact" style="font-family: Impact,Charcoal,sans-serif">Impact</option>
                        <option value="Lucida Sans Unicode" style="font-family: Lucida Sans Unicode,Lucida Grande,sans-serif">Lucida Sans Unicode</option>
                        <option selected="selected" value="Tahoma,Geneva,sans-serif" style="font-family: Tahoma,Geneva,sans-serif">Tahoma</option>
                        <option value="Trebuchet MS" style="font-family: Trebuchet MS,Helvetica,sans-serif">Trebuchet MS</option>
                        <option value="Verdana" style="font-family: Verdana,Geneva,sans-serif">Verdana</option>
                        <option disabled style="font-weight: bold; background-color: #EEEEEE">Monospace Fonts</option>
                        <option value="Courier New" style="font-family: Courier New,Courier,monospace">Courier New</option>
                        <option value="Lucida Console" style="font-family: Lucida Console,Monaco,monospace">Lucida Console</option>
                    </select>
                </div>
                <div class="col-sm-2" id="text_el_t" style="display:none">
                    <textarea oninput="change_label_text()" rows="1" cols="40" id="label_text">
                            </textarea>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <canvas id="canvas" style="border:solid;border-width:0.01px; border-color:grey;background-color:rgb(280,280,280);width:100%;height:100%"></canvas>
                </div>
            </div>
            <div class="row">

                <div class="col-sm-12" style="overflow-x:scroll">
                    <img id="page1" class="grid-box" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" height="100" width="100" />
                    <img class="grid-box" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" height="100" width="100" />
                    <img class="grid-box" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" height="100" width="100" />
                    <img class="grid-box" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" height="100" width="100" />
                    <img class="grid-box" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" height="100" width="100" />
                    <img class="grid-box" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" height="100" width="100" />
                    <img class="grid-box" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" height="100" width="100" />
                    <img class="grid-box" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" height="100" width="100" />
                    <img class="grid-box" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" height="100" width="100" />
                    <img class="grid-box" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" height="100" width="100" />
                    <img class="grid-box" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" height="100" width="100" />
                    <img class="grid-box" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" height="100" width="100" />
                    <img class="grid-box" src="~/dist/img/mitchell-orr-2G4_KMJ4b9s-unsplash.jpg" height="100" width="100" />
                </div>
            </div><hr />
        </div>
    </div>
</div>
<script>
    let change_fontfamily = function() {
        if (current_object_index != null) {
            objects[current_object_index].fontFamily = document.getElementById("fontfamily_text").value;
            console.log(objects[current_object_index].fontFamily);
            draw_objects();
        }
    }
    var download = function() {
        var link = document.createElement('a');
        link.download = 'filename.png';
        link.href = document.getElementById('canvas').toDataURL();
        document.getElementById("image1").src = link.href;
        link.click();
    }
    //let upload_file = function() {
    //    var fileInput =
    //        document.getElementById('file_upload');

    //    var filePath = fileInput.value;
    //    // Allowing file type
    //    var allowedExtensions =
    //        /(\.jpg|\.jpeg|\.png|\.gif)$/i;

    //    if (!allowedExtensions.exec(filePath)) {
    //        alert('Invalid file type');
    //        fileInput.value = '';
    //        return false;
    //    }
    //    else {
    //        add_image_object(filePath);
    //    }
    //}
    $('#file_upload').change(function(event) {
        console.log(event);
        var filePath = event.value;
        alert(filePath);
        // Allowing file type
        var allowedExtensions =
            /(\.jpg|\.jpeg|\.png|\.gif)$/i;

        if (!allowedExtensions.exec(filePath)) {
            alert('Invalid file type');
            event.value = '';
            return false;
        }
        else {
            alert(URL.createObjectURL(event.target.files[0]));
            add_image_object(URL.createObjectURL(event.target.files[0]));
        }
    });
                                                //var canvas = document.getElementById("canvas");
                                                //var ctx = canvas.getContext("2d");
                                                //var canvasOffset = $("#canvas").offset();
                                                //var offsetX = canvasOffset.left;
                                                //var offsetY = canvasOffset.top;
                                                //var canvasWidth = canvas.width;
                                                //var canvasHeight = canvas.height;
                                                //var isDragging = false;

                                                //function drawCanvasImage(imgid) {
                                                //    var img = document.getElementById(imgid);
                                                //    ctx.drawImage(img, 10, 10, 20, 20);
                                                //}
                                                //function handleMouseDown(e) {
                                                //    var canMouseX = parseInt(e.clientX - offsetX);
                                                //    var canMouseY = parseInt(e.clientY - offsetY);
                                                //    // set the drag flag
                                                //    isDragging = true;
                                                //}

                                                //function handleMouseUp(e) {
                                                //    var canMouseX = parseInt(e.clientX - offsetX);
                                                //    var canMouseY = parseInt(e.clientY - offsetY);
                                                //    // clear the drag flag
                                                //    isDragging = false;
                                                //}

                                                //function handleMouseOut(e) {
                                                //    var canMouseX = parseInt(e.clientX - offsetX);
                                                //    var canMouseY = parseInt(e.clientY - offsetY);
                                                //    // user has left the canvas, so clear the drag flag
                                                //    //isDragging=false;
                                                //}

                                                //function handleMouseMove(e) {
                                                //    var canMouseX = parseInt(e.clientX - offsetX);
                                                //    var canMouseY = parseInt(e.clientY - offsetY);
                                                //    // if the drag flag is set, clear the canvas and draw the image
                                                //    if (isDragging) {
                                                //        ctx.clearRect(0, 0, canvasWidth, canvasHeight);
                                                //        ctx.drawImage(img, canMouseX - 128 / 2, canMouseY - 120 / 2, 128, 120);
                                                //    }
                                                //}

                                                //$("#canvas").mousedown(function(e) { handleMouseDown(e); });
                                                //$("#canvas").mousemove(function(e) { handleMouseMove(e); });
                                                //$("#canvas").mouseup(function(e) { handleMouseUp(e); });
                                                //$("#canvas").mouseout(function(e) { handleMouseOut(e); });

</script>
<script src="~/js/Canvas_Editor.js"></script>